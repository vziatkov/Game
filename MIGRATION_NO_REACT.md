# üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è: –£–¥–∞–ª–µ–Ω–∏–µ React

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### –£–¥–∞–ª–µ–Ω–æ
- ‚ùå `src/game/react/` - –≤—Å—è –ø–∞–ø–∫–∞ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚ùå `src/App.tsx` - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π App –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚ùå `src/game/index.tsx` - React-based –∑–∞–≥—Ä—É–∑—á–∏–∫ –∏–≥—Ä—ã
- ‚ùå React –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `package.json`:
  - `react`
  - `react-dom`
  - `mobx-react`
  - `@types/react`
  - `@types/react-dom`
  - `@vitejs/plugin-react`
  - `eslint-plugin-react`

### –°–æ–∑–¥–∞–Ω–æ
- ‚úÖ `src/game/ui/Joystick.ts` - –í–∞–Ω–∏–ª—å–Ω—ã–π TypeScript –¥–∂–æ–π—Å—Ç–∏–∫
- ‚úÖ `src/game/ui/Joystick.css` - –°—Ç–∏–ª–∏ –¥–∂–æ–π—Å—Ç–∏–∫–∞
- ‚úÖ `src/game/index.ts` - –ù–æ–≤—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –∏–≥—Ä—ã –±–µ–∑ React

### –ò–∑–º–µ–Ω–µ–Ω–æ
- üìù `src/main.ts` - –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `uiRoot` –≤–º–µ—Å—Ç–æ `reactRoot`
- üìù `index.html` - `reactRoot` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `uiRoot`
- üìù `package.json` - –£–¥–∞–ª–µ–Ω—ã React –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- üìù `vite.config.ts` - –£–±—Ä–∞–Ω `@vitejs/plugin-react`

## üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
Game/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.ts                    [–ò–ó–ú–ï–ù–ï–ù]
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ game/
‚îÇ       ‚îú‚îÄ‚îÄ index.ts               [–ù–û–í–´–ô] - Vanilla JS –∑–∞–≥—Ä—É–∑—á–∏–∫
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ ui/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Joystick.ts        [–ù–û–í–´–ô] ‚≠ê –í–∞–Ω–∏–ª—å–Ω—ã–π –¥–∂–æ–π—Å—Ç–∏–∫
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ Joystick.css       [–ù–û–í–´–ô] –°—Ç–∏–ª–∏
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ pixi/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ scenes/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ GameScene.ts   [–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô]
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ AIPlayer.ts    [–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô]
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ store/
‚îÇ           ‚îú‚îÄ‚îÄ joystick.ts        [–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô]
‚îÇ           ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ index.html                     [–ò–ó–ú–ï–ù–ï–ù] reactRoot ‚Üí uiRoot
‚îú‚îÄ‚îÄ package.json                   [–ò–ó–ú–ï–ù–ï–ù] –£–¥–∞–ª–µ–Ω React
‚îî‚îÄ‚îÄ vite.config.ts                 [–ò–ó–ú–ï–ù–ï–ù] –ë–µ–∑ React –ø–ª–∞–≥–∏–Ω–∞
```

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–∂–æ–π—Å—Ç–∏–∫–∞

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { Joystick } from './game/ui/Joystick';

// –°–æ–∑–¥–∞–Ω–∏–µ –¥–∂–æ–π—Å—Ç–∏–∫–∞
const joystick = new Joystick({
  container: document.getElementById('uiRoot')!,
  maxDistance: 80,
  onVectorChange: (vector) => {
    console.log(`X: ${vector.x}, Y: ${vector.y}, Force: ${vector.force}`);
  }
});

// –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å
joystick.show();
joystick.hide();

// –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ
joystick.destroy();
```

### –í –∏–≥—Ä–æ–≤–æ–π —Å—Ü–µ–Ω–µ

```typescript
import { joystickStore } from '../store/joystick';
import { reaction } from 'mobx';

class GameScene {
  private joystickDisposer: (() => void) | null = null;

  setupJoystick() {
    this.joystickDisposer = reaction(
      () => joystickStore.getVector(),
      (vector) => {
        this.player.x += vector.x * 5;
        this.player.y += vector.y * 5;
      }
    );
  }

  destroy() {
    if (this.joystickDisposer) {
      this.joystickDisposer();
    }
  }
}
```

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è

### –ë—ã–ª–æ (React)
```tsx
import { Joystick } from './components/Joystick';

<Joystick onVectorChange={handleVectorChange} />
```

### –°—Ç–∞–ª–æ (Vanilla)
```typescript
import { Joystick } from './ui/Joystick';

const joystick = new Joystick({
  container: uiRoot,
  onVectorChange: handleVectorChange
});
```

## üì¶ API –í–∞–Ω–∏–ª—å–Ω–æ–≥–æ –¥–∂–æ–π—Å—Ç–∏–∫–∞

### Constructor

```typescript
new Joystick(config: JoystickConfig)

interface JoystickConfig {
  container: HTMLElement;        // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–∂–æ–π—Å—Ç–∏–∫–∞
  maxDistance?: number;          // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Ä—É—á–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 80)
  onVectorChange?: (vector) => void; // –ö–æ–ª–±—ç–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–µ–∫—Ç–æ—Ä–∞
}
```

### –ú–µ—Ç–æ–¥—ã

```typescript
joystick.show()     // –ü–æ–∫–∞–∑–∞—Ç—å –¥–∂–æ–π—Å—Ç–∏–∫
joystick.hide()     // –°–∫—Ä—ã—Ç—å –¥–∂–æ–π—Å—Ç–∏–∫
joystick.destroy()  // –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –∏ –æ—á–∏—Å—Ç–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã
```

### –°–æ–±—ã—Ç–∏—è

–í–µ–∫—Ç–æ—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–ª–±—ç–∫ `onVectorChange`:

```typescript
{
  x: number,      // -1 to 1 (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å)
  y: number,      // -1 to 1 (–≤–µ—Ä—Ç–∏–∫–∞–ª—å)  
  force: number   // 0 to 1 (—Å–∏–ª–∞ –Ω–∞–∂–∞—Ç–∏—è)
}
```

## üîÑ MobX Store

Store –¥–∂–æ–π—Å—Ç–∏–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```typescript
import { joystickStore } from './game/store/joystick';

// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –≤–µ–∫—Ç–æ—Ä
const vector = joystickStore.getVector();

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
if (joystickStore.isActive) { ... }

// –ü–æ–ª—É—á–∏—Ç—å —É–≥–æ–ª –∏ –º–∞–≥–Ω–∏—Ç—É–¥—É
const angle = joystickStore.getAngle();
const magnitude = joystickStore.getMagnitude();

// –°–±—Ä–æ—Å–∏—Ç—å
joystickStore.reset();
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

### üìâ –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ bundle
- **–ë—ã–ª–æ**: ~145KB (React + ReactDOM + MobX-React)
- **–°—Ç–∞–ª–æ**: ~15KB (—Ç–æ–ª—å–∫–æ MobX)
- **–≠–∫–æ–Ω–æ–º–∏—è**: ~130KB (~90%)

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ù–µ—Ç Virtual DOM overhead
- –ü—Ä—è–º—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å DOM
- –ú–µ–Ω—å—à–µ re-renders
- –ë—ã—Å—Ç—Ä–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

### üîß –ü—Ä–æ—Å—Ç–æ—Ç–∞
- –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü—Ä–æ—â–µ –æ—Ç–ª–∞–¥–∫–∞
- –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π
- –ß–∏—Å—Ç—ã–π TypeScript

### üéÆ –ö–æ–Ω—Ç—Ä–æ–ª—å
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ DOM
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º
- –ì–∏–±–∫–æ—Å—Ç—å –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üìù –ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [x] –°–æ–∑–¥–∞—Ç—å –≤–∞–Ω–∏–ª—å–Ω—ã–π Joystick.ts
- [x] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏ Joystick.css
- [x] –û–±–Ω–æ–≤–∏—Ç—å game/index.ts
- [x] –û–±–Ω–æ–≤–∏—Ç—å main.ts
- [x] –û–±–Ω–æ–≤–∏—Ç—å index.html
- [x] –£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É src/game/react
- [x] –û–±–Ω–æ–≤–∏—Ç—å package.json
- [x] –û–±–Ω–æ–≤–∏—Ç—å vite.config.ts
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–£–¥–∞–ª–∏—Ç—å node_modules –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å**
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç**
   ```bash
   npm run dev
   ```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∂–æ–π—Å—Ç–∏–∫**
   - –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ desktop
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ mobile

4. **–°–æ–±—Ä–∞—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**
   ```bash
   npm run build
   ```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –î–∂–æ–π—Å—Ç–∏–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—ã—à—å—é/—Ç–∞—á–µ–º
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π X, Y, Force
- ‚úÖ –î–≤–∏–∂–µ–Ω–∏–µ AIPlayer
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ñ–æ–Ω–∞
- ‚úÖ –í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

### –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
- ‚ùå –û—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚ùå Warnings –æ React
- ‚ùå –ü—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- ‚ùå –£—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

## üêõ Troubleshooting

### –î–∂–æ–π—Å—Ç–∏–∫ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```typescript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
document.getElementById('uiRoot')
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —ç–ª–µ–º–µ–Ω—Ç, –Ω–µ null.

### –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `.ts`, –∞ –Ω–µ `.tsx`:
```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
import { Joystick } from './ui/Joystick';

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (React)
import { Joystick } from './components/Joystick';
```

### Store –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MobX —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
```bash
npm list mobx
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ bundle size

### –î–æ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å React)
```
dist/assets/index-abc123.js    245 KB
dist/assets/vendor-def456.js   180 KB
Total:                         425 KB
```

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–±–µ–∑ React)
```
dist/assets/index-abc123.js    110 KB
dist/assets/vendor-def456.js    50 KB
Total:                         160 KB
```

**–≠–∫–æ–Ω–æ–º–∏—è: ~265 KB (62%)**

## ‚úÖ –ò—Ç–æ–≥

–£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–∏–ª–∏ React –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–∂–æ–π—Å—Ç–∏–∫–∞:

- ‚úÖ –î–∂–æ–π—Å—Ç–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —á–∏—Å—Ç–æ–º TypeScript
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä bundle –Ω–∞ ~60%
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ MobX store —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

---

**–î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**: 14 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

