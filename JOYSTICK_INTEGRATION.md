# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –î–∂–æ–π—Å—Ç–∏–∫–∞ –≤ –ü—Ä–æ–µ–∫—Ç

## üìã –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React

#### –ë–∞–∑–æ–≤—ã–π –¥–∂–æ–π—Å—Ç–∏–∫
- **–§–∞–π–ª**: `src/game/react/components/Joystick.tsx`
- **–°—Ç–∏–ª–∏**: `src/game/react/components/Joystick.css`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –õ–µ–≥–∫–∏–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –¥–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –¥–∂–æ–π—Å—Ç–∏–∫
- **–§–∞–π–ª**: `src/game/react/components/JoystickAdvanced.tsx`
- **–°—Ç–∏–ª–∏**: `src/game/react/components/JoystickAdvanced.css`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –î–∂–æ–π—Å—Ç–∏–∫ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ (—á–∞—Å—Ç–∏—Ü—ã, –≤–æ–ª–Ω—ã, —Å–µ—Ç–∫–∞, –Ω–µ–æ–Ω) –∏ –∑–≤—É–∫–∞–º–∏

### 2. Store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

- **–§–∞–π–ª**: `src/game/store/joystick.ts`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
  - –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –¥–∂–æ–π—Å—Ç–∏–∫–∞
  - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —É–≥–ª–∞ –∏ –º–∞–≥–Ω–∏—Ç—É–¥—ã
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MobX –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∏–≥—Ä–æ–≤—É—é —Å—Ü–µ–Ω—É

- **–§–∞–π–ª**: `src/game/pixi/scenes/GameScene.ts`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**: 
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AIPlayer —Å –ø–æ–º–æ—â—å—é –¥–∂–æ–π—Å—Ç–∏–∫–∞
  - –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ–∫—Ç–æ—Ä–∞

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/game/react/index.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω Joystick –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `src/game/store/index.ts` - —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç joystickStore
- `index.html` - –¥–æ–±–∞–≤–ª–µ–Ω—ã CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

## üéÆ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë–∞–∑–æ–≤—ã–π –¥–∂–æ–π—Å—Ç–∏–∫ (—Ç–µ–∫—É—â–∏–π)

```tsx
import { Joystick } from './components/Joystick';

<Joystick onVectorChange={handleVectorChange} />
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –¥–∂–æ–π—Å—Ç–∏–∫ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏

```tsx
import { JoystickAdvanced } from './components/JoystickAdvanced';

<JoystickAdvanced 
  onVectorChange={handleVectorChange}
  enableEffects={true}
  enableSound={true}
/>
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏

–í —Ñ–∞–π–ª–µ `src/game/react/index.tsx` –∑–∞–º–µ–Ω–∏—Ç–µ –∏–º–ø–æ—Ä—Ç:

```tsx
// –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (—Ç–µ–∫—É—â–∞—è)
import { Joystick } from './components/Joystick';

// –ò–õ–ò

// –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
import { JoystickAdvanced as Joystick } from './components/JoystickAdvanced';
```

## üîß API –∏ –ø—Ä–∏–º–µ—Ä—ã

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Store

```typescript
import { joystickStore } from './game/store/joystick';
import { reaction } from 'mobx';

// –í PixiJS —Å—Ü–µ–Ω–µ
class GameScene extends Container {
  setupControls() {
    reaction(
      () => joystickStore.getVector(),
      (vector) => {
        // vector.x: -1 to 1 (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å)
        // vector.y: -1 to 1 (–≤–µ—Ä—Ç–∏–∫–∞–ª—å)
        // vector.force: 0 to 1 (—Å–∏–ª–∞ –Ω–∞–∂–∞—Ç–∏—è)
        this.player.x += vector.x * 5;
        this.player.y += vector.y * 5;
      }
    );
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

```typescript
if (joystickStore.isActive) {
  console.log('–î–∂–æ–π—Å—Ç–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è');
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≥–ª–∞ –∏ –º–∞–≥–Ω–∏—Ç—É–¥—ã

```typescript
const angle = joystickStore.getAngle(); // —Ä–∞–¥–∏–∞–Ω—ã
const magnitude = joystickStore.getMagnitude(); // 0 to 1

// –ü—Ä–∏–º–µ—Ä: —Å—Ç—Ä–µ–ª—å–±–∞ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –¥–∂–æ–π—Å—Ç–∏–∫–∞
if (magnitude > 0.5) {
  shootProjectile(angle);
}
```

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

–î–∂–æ–π—Å—Ç–∏–∫ —Å–æ–∑–¥–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ —Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `--light-x`: –ø–æ–∑–∏—Ü–∏—è –ø–æ X (50% —Ü–µ–Ω—Ç—Ä)
- `--light-y`: –ø–æ–∑–∏—Ü–∏—è –ø–æ Y (50% —Ü–µ–Ω—Ç—Ä)
- `--light-size`: —Ä–∞–∑–º–µ—Ä —Å–≤–µ—á–µ–Ω–∏—è (30-70%)

–≠—Ñ—Ñ–µ–∫—Ç—ã –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏:
- **–ß–∞—Å—Ç–∏—Ü—ã**: –ü–ª–∞–≤–∞—é—â–∏–µ —á–∞—Å—Ç–∏—Ü—ã, —Ä–µ–∞–≥–∏—Ä—É—é—â–∏–µ –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ
- **–í–æ–ª–Ω—ã**: –ö—Ä—É–≥–æ–≤—ã–µ –≤–æ–ª–Ω—ã –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º –Ω–∞–∂–∞—Ç–∏–∏
- **–°–µ—Ç–∫–∞**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–µ—Ç–∫–∞ —Å –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **–ù–µ–æ–Ω**: –ù–µ–æ–Ω–æ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ü–≤–µ—Ç–∞

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

–î–∂–æ–π—Å—Ç–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è:

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | –†–∞–∑–º–µ—Ä | –ü–æ–∑–∏—Ü–∏—è |
|------------|--------|---------|
| Desktop | 180px | –¶–µ–Ω—Ç—Ä —Å–Ω–∏–∑—É |
| Tablet | 160px | –¶–µ–Ω—Ç—Ä —Å–Ω–∏–∑—É |
| Mobile (–ø–æ—Ä—Ç—Ä–µ—Ç) | 140px | –¶–µ–Ω—Ç—Ä —Å–Ω–∏–∑—É |
| Mobile (–ª–∞–Ω–¥—à–∞—Ñ—Ç) | 120px | –°–ø—Ä–∞–≤–∞ —Å–Ω–∏–∑—É |

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `requestAnimationFrame`
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä—ã —Å —Ñ–ª–∞–≥–æ–º `needsRender`
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ CSS –∞–Ω–∏–º–∞—Ü–∏–∏ —Å GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ FPS –∏–≥—Ä—ã

## üéØ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç—Ä–∏ —Ç–∏–ø–∞ –≤–≤–æ–¥–∞ (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞):
1. **Pointer Events** (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã)
2. **Touch Events** (–º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
3. **Mouse Events** (—Å—Ç–∞—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã)

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞:
- ‚úÖ iOS Safari
- ‚úÖ Android Chrome
- ‚úÖ Desktop Chrome/Firefox/Safari
- ‚úÖ Touch screens
- ‚úÖ Mouse/Trackpad

## üîä –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (—Ç–æ–ª—å–∫–æ Advanced)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Web Audio API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–≤—É–∫–æ–≤:
- –ó–≤—É–∫ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –∫–∞—Å–∞–Ω–∏—è
- –ó–≤—É–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è (—á–∞—Å—Ç–æ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- –ó–≤—É–∫ –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏

–í–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞:
```tsx
<JoystickAdvanced enableSound={true} />
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ —Ñ–∞–π–ª–µ:
`src/game/react/components/README.md`

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–≤–∏–∂–µ–Ω–∏—è

–í `GameScene.ts`:
```typescript
private moveSpeed = 5; // –ò–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–∂–æ–π—Å—Ç–∏–∫–∞

–í `Joystick.css`:
```css
.joystick {
  width: 180px;  /* –ò–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä */
  height: 180px;
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è —Ä—É—á–∫–∏

–í `Joystick.tsx`:
```typescript
const maxDistance = 80; // –ò–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ –¥–∂–æ–π—Å—Ç–∏–∫–∞:
```typescript
<Joystick 
  onVectorChange={(v) => {
    console.log(`X: ${v.x.toFixed(2)}, Y: ${v.y.toFixed(2)}, F: ${v.force.toFixed(2)}`);
  }}
/>
```

## üéÅ –ë–æ–Ω—É—Å: –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: 8-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ

```typescript
reaction(
  () => joystickStore.getVector(),
  (vector) => {
    if (vector.force < 0.3) return; // –ú–µ—Ä—Ç–≤–∞—è –∑–æ–Ω–∞
    
    const angle = joystickStore.getAngle();
    const direction = Math.round(angle / (Math.PI / 4)) % 8;
    
    // 0: –ø—Ä–∞–≤–æ, 1: –≤–µ—Ä—Ö-–ø—Ä–∞–≤–æ, 2: –≤–µ—Ä—Ö, –∏ —Ç.–¥.
    player.setDirection(direction);
  }
);
```

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏–µ

```typescript
reaction(
  () => joystickStore.getVector(),
  (vector) => {
    if (vector.force > 0.1) {
      const angle = joystickStore.getAngle();
      crosshair.rotation = angle;
      crosshair.visible = true;
    } else {
      crosshair.visible = false;
    }
  }
);
```

### –ü—Ä–∏–º–µ—Ä 3: –†–µ–≥—É–ª–∏—Ä—É–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å

```typescript
reaction(
  () => joystickStore.getVector(),
  (vector) => {
    const baseSpeed = 100;
    const speed = baseSpeed * vector.force;
    
    player.velocity.x = vector.x * speed;
    player.velocity.y = vector.y * speed;
  }
);
```

---

**–°–æ–∑–¥–∞–Ω–æ**: 2025-10-14  
**–ê–≤—Ç–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: AI Assistant  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

